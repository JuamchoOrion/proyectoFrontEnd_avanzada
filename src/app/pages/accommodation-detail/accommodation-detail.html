<app-navbar></app-navbar>

<div class="container my-5" *ngIf="!loading && destination">
  <!-- Secci√≥n superior: carrusel + tarjeta -->
  <div class="row g-4 align-items-center">
    <div class="col-md-7">
      <app-carousel [images]="destination.images" showMode="all"></app-carousel>
    </div>

    <div class="col-md-5">
      <app-destination-info [destination]="destination"></app-destination-info>
    </div>
  </div>

  <!-- Secci√≥n inferior: descripci√≥n y servicios -->
  <div class="row mt-5">
    <div class="col-md-8">
      <app-destination-description
        [description]="destination.description"
        [services]="destination.accommodationServiceTypes"
      ></app-destination-description>
    </div>
    <div class="col-md-4"></div>
  </div>

  <!-- Mapa -->
  <div class="row mt-5">
    <div class="col-12">
      <app-home></app-home>
    </div>
  </div>

<!-- M√âTRICAS (solo host) -->
<div *ngIf="isHost && showMetrics" class="mt-5">
  <h4 class="mb-4">üìä M√©tricas del alojamiento</h4>

  <div class="row text-center mb-5">
    <div class="col-md-6 mb-3">
      <div class="metric-card p-3 border rounded">
        <p>Total de Reservas</p>
        <p class="h5">{{ metrics?.totalReservations }}</p>
      </div>
    </div>

    <div class="col-md-6 mb-3">
      <div class="metric-card p-3 border rounded">
        <p>Calificaci√≥n Promedio</p>
        <p class="h5">{{ metrics?.averageRating | number:'1.1-2' }} ‚≠ê</p>
      </div>
    </div>
  </div>
</div>
  <!-- Rese√±as -->
  <app-reviews-section
    [reviews]="reviews"
    [isHost]="isHost"
  ></app-reviews-section>
</div>

<!-- Loader -->
<div class="text-center my-5" *ngIf="loading">
  <div class="spinner-border text-primary"></div>
</div>

<!-- Error -->
<div class="text-center text-danger my-5" *ngIf="error">
  {{ error }}
</div>

<app-footer></app-footer>
