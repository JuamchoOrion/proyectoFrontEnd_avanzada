<div class="card p-4" *ngIf="!loading; else loadingTemplate">
  <form #f="ngForm" (ngSubmit)="onSubmit(f)">
    <h2 class="text-primary mb-4">Editar Alojamiento</h2>

    <div class="mb-3">
      <label class="form-label">Título</label>
      <input
        type="text"
        class="form-control"
        name="title"
        [(ngModel)]="dto.title"
        required
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Descripción</label>
      <textarea
        class="form-control"
        name="description"
        [(ngModel)]="dto.description"
        rows="4"
        required
      ></textarea>
    </div>

    <h5 class="text-primary mt-4">Ubicación</h5>
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Ciudad</label>
        <input
          type="text"
          class="form-control"
          name="city"
          [(ngModel)]="dto.city"
          required
        />
      </div>
      <div class="col-md-6">
        <label class="form-label">Dirección</label>
        <input
          type="text"
          class="form-control"
          name="address"
          [(ngModel)]="dto.address"
          required
        />
      </div>
      <div class="col-md-6">
        <label class="form-label">Latitud</label>
        <input
          type="number"
          class="form-control"
          name="latitude"
          [(ngModel)]="dto.latitude"
          required
        />
      </div>
      <div class="col-md-6">
        <label class="form-label">Longitud</label>
        <input
          type="number"
          class="form-control"
          name="longitude"
          [(ngModel)]="dto.longitude"
          required
        />
      </div>
    </div>

    <h5 class="text-primary mt-4">Detalles</h5>
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Precio por noche</label>
        <input
          type="number"
          class="form-control"
          name="pricePerNight"
          [(ngModel)]="dto.pricePerNight"
          required
        />
      </div>
      <div class="col-md-6">
        <label class="form-label">Capacidad máxima</label>
        <input
          type="number"
          class="form-control"
          name="maxGuests"
          [(ngModel)]="dto.maxGuests"
          required
        />
      </div>
    </div>

    <h5 class="text-primary mt-4">Servicios</h5>
    <div class="row">
      <div
        class="col-md-4"
        *ngFor="let service of ['WIFI', 'POOL', 'BREAKFAST', 'AIR_CONDITIONING', 'PARKING']"
      >
        <div class="form-check">
          <input
            type="checkbox"
            class="form-check-input"
            [checked]="dto.services.includes(service)"
            (change)="toggleService(service, $event.target.checked)"
            [id]="service"
          />
          <label class="form-check-label" [for]="service">{{ service.replace('_', ' ') }}</label>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <button type="submit" class="btn btn-primary">Guardar Cambios</button>
      <button type="button" class="btn btn-cancelar" (click)="cancel()">Cancelar</button>
    </div>

    <p class="text-danger mt-2" *ngIf="error">{{ error }}</p>
  </form>
</div>

<ng-template #loadingTemplate>
  <p>Cargando alojamiento...</p>
</ng-template>
